{% extends 'templates/base.html' %}

{% block content %}

<body>
    <div class="container">
        <h1>Your Shopping Cart</h1>

        {% if cart %}
            {% if cart.cartitem_set.all %}
                <table>
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in cart.cartitem_set.all %}
                        <tr>
                            <td>{{ item.product.name }}</td>
                            <td>{{ item.quantity }}</td>
                            <td>${{ item.product.price }}</td>
                            <td>${{ item.product.price|multiply:item.quantity }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <div class="cart-summary">
                    <p><strong>Total Items:</strong> {{ cart.total_items }}</p>
                    <p><strong>Total Price:</strong> ${{ cart.total_price }}</p>
                </div>

                <div class="checkout-button">
                    <a href="{% url 'checkout' %}" class="btn btn-primary">Proceed to Checkout</a>
                </div>
            {% else %}
                <p>Your cart is empty. <a href="{% url 'shop:index' %}">Continue shopping</a>.</p>
            {% endif %}
        {% else %}
            <p>You don't have an active cart. <a href="{% url 'shop:index' %}">Continue shopping</a>.</p>
        {% endif %}

    </div>

    <script src="{% static 'js/scripts.js' %}"></script>
</body>

{% endblock %}
